import { LitElement, html } from 'lit';
import { consume } from '@lit/context';
import { appContext } from '../context/app-context.js';

class Navbar extends LitElement {
  static properties = {
    appStore: { type: Object },
  };

  constructor() {
    super();
    this.appStore = undefined;
  }

  // ✅ Consume Context Using Lit’s @consume Decorator
  @consume({ context: appContext, subscribe: true })
  set context(value) {
    this.appStore = value;
    this.requestUpdate(); // ✅ Ensure UI updates when context is available
  }

  render() {
    if (!this.appStore) {
      return html`<p>Loading...</p>`;
    }

    return html`
      <nav>
        <button @click=${() => this.appStore.goToPage('/')}>Home</button>
        <button @click=${() => this.appStore.goToPage('/profile/123')}>Profile</button>
        <button @click=${() => this.appStore.goToPage('/cart')}>Cart</button>
      </nav>
    `;
  }
}

customElements.define('navbar', Navbar);
